import axios from 'axios';
import { MapUtilities } from './mapUtilities';

type CategorySearchParams = {
	city: string;
	limit: number;
	category:
		| 'services'
		| 'shopping'
		| 'health_services'
		| 'office'
		| 'food_and_drink'
		| 'food'
		| 'shipping_store'
		| 'restaurant'
		| 'education'
		| 'landscaping'
		| 'school'
		| 'real_estate_agent'
		| 'outdoors'
		| 'financial_services'
		| 'doctors_office'
		| 'grocery'
		| 'nightlife'
		| 'hairdresser'
		| 'lodging'
		| 'home'
		| 'auto_repair'
		| 'place_of_worship'
		| 'bar'
		| 'medical_practice'
		| 'entertainment'
		| 'clothing_store'
		| 'consulting'
		| 'fast_food'
		| 'bank'
		| 'insurance_broker'
		| 'transportation'
		| 'dentist'
		| 'lawyer'
		| 'fitness_center'
		| 'advertising_agency'
		| 'car_dealership'
		| 'beauty_store'
		| 'park'
		| 'bakery'
		| 'electronics_shop'
		| 'travel_agency'
		| 'furniture_store'
		| 'pharmacy'
		| 'sports'
		| 'supermarket'
		| 'tourist_attraction'
		| 'salon'
		| 'convenience_store'
		| 'gas_station'
		| 'states_and_municipalities'
		| 'medical_clinic'
		| 'cafe'
		| 'church'
		| 'clothing'
		| 'psychotherapist'
		| 'university_building'
		| 'government'
		| 'childcare'
		| 'coffee'
		| 'coffee_shop'
		| 'copyshop'
		| 'alternative_healthcare'
		| 'tech_startup'
		| 'farm'
		| 'pet_store'
		| 'wholesale_store'
		| 'jewelry_store'
		| 'post_office'
		| 'hospital'
		| 'shoe_store'
		| 'employment_agency'
		| 'atm'
		| 'phone_store'
		| 'university'
		| 'womens_clothing_store'
		| 'florist'
		| 'butcher_shop'
		| 'spa'
		| 'physiotherapist'
		| 'factory'
		| 'photographer'
		| 'historic_site'
		| 'veterinarian'
		| 'breakfast_restaurant'
		| 'chiropractor'
		| 'nongovernmental_organization'
		| 'sports_shop'
		| 'department_store'
		| 'nail_salon'
		| 'mexican_restaurant'
		| 'temple'
		| 'car_rental'
		| 'monument'
		| 'vacation_rental'
		| 'gift_shop'
		| 'campground'
		| 'taxi'
		| 'hardware_store'
		| 'laundry'
		| 'psychological_services'
		| 'fishing'
		| 'coworking_space'
		| 'it'
		| 'dessert_shop'
		| 'elementary_school'
		| 'art'
		| 'book_store'
		| 'liquor_store'
		| 'parking_lot'
		| 'optician'
		| 'hospital_unit'
		| 'massage_shop'
		| 'nightclub'
		| 'trade_school'
		| 'bed_and_breakfast'
		| 'art_gallery'
		| 'sports_club'
		| 'driving_school'
		| 'garden_store'
		| 'tobacco_shop'
		| 'event_planner'
		| 'paper_goods_store'
		| 'italian_restaurant'
		| 'fabric_store'
		| 'garden'
		| 'storage'
		| 'car_wash'
		| 'assisted_living_facility'
		| 'shopping_mall'
		| 'music_venue'
		| 'theatre'
		| 'fashion_accessory_shop'
		| 'warehouse'
		| 'burger_restaurant'
		| 'library'
		| 'thrift_shop'
		| 'theme_park'
		| 'home_repair'
		| 'museum'
		| 'arts_and_craft_store'
		| 'funeral_home'
		| 'laboratory'
		| 'government_offices'
		| 'charity'
		| 'field'
		| 'kindergarten'
		| 'playground'
		| 'toy_store'
		| 'tutor'
		| 'turkish_restaurant'
		| 'american_restaurant'
		| 'ice_cream'
		| 'medical_supply_store'
		| 'event_space'
		| 'beach'
		| 'deli'
		| 'police_station'
		| 'pizza_restaurant'
		| 'equipment_rental'
		| 'photo_store'
		| 'bus_stop'
		| 'hostel'
		| 'cinema'
		| 'counselling'
		| 'indian_restaurant'
		| 'tourist_information'
		| 'studio'
		| 'locksmith'
		| 'pub'
		| 'health_food_store'
		| 'language_school'
		| 'seafood_restaurant'
		| 'dance_studio'
		| 'information_technology_company'
		| 'motorcycle_dealer'
		| 'social_club'
		| 'teahouse'
		| 'diner_restaurant'
		| 'tailor'
		| 'townhall'
		| 'bridal_shop'
		| 'lake'
		| 'winery'
		| 'high_school'
		| 'stadium'
		| 'antique_shop'
		| 'bicycle_shop'
		| 'chinese_restaurant'
		| 'golf_course'
		| 'marina'
		| 'fire_station'
		| 'railway_station'
		| 'medical_laboratory'
		| 'trailhead'
		| 'care_services'
		| 'wine_bar'
		| 'arcade'
		| 'bus_station'
		| 'discount_store'
		| 'market'
		| 'swimming_pool'
		| 'brewery'
		| 'military_base'
		| 'beer_bar'
		| 'video_store'
		| 'martial_arts_studio'
		| 'cemetery'
		| 'conference_center'
		| 'music_shop'
		| 'music_school'
		| 'cocktail_bar'
		| 'mountain'
		| 'tours'
		| 'casino'
		| 'steakhouse'
		| 'notary'
		| 'snack_bar'
		| 'taco_shop'
		| 'boutique'
		| 'plaza'
		| 'resort'
		| 'charging_station'
		| 'barbeque_restaurant'
		| 'dry_cleaners'
		| 'community_center'
		| 'yoga_studio'
		| 'japanese_restaurant'
		| 'waste_transfer_station'
		| 'frame_store'
		| 'courthouse'
		| 'juice_bar'
		| 'design_studio'
		| 'tattoo_parlour'
		| 'tanning_salon'
		| 'soccer_field'
		| 'buffet_restaurant'
		| 'recycling_center'
		| 'recreation_center'
		| 'motel'
		| 'viewpoint'
		| 'biergarten'
		| 'mediterranean_restaurant'
		| 'sports_bar'
		| 'spanish_restaurant'
		| 'asian_restaurant'
		| 'greek_restaurant'
		| 'repair_shop'
		| 'baby_goods_shop'
		| 'sushi_restaurant'
		| 'french_restaurant'
		| 'animal_shelter'
		| 'fishmonger'
		| 'forest'
		| 'radio_studio'
		| 'dog_park'
		| 'dormitory'
		| 'fishing_store'
		| 'concert_hall'
		| 'news_kiosk'
		| 'food_court'
		| 'hobby_shop'
		| 'stable'
		| 'rehabilitation_center'
		| 'luggage_store'
		| 'cobbler'
		| 'university_laboratory'
		| 'fish_and_chips_restaurant'
		| 'mosque'
		| 'recording_studio'
		| 'wings_joint'
		| 'stripclub'
		| 'bowling_alley'
		| 'racetrack'
		| 'public_artwork'
		| 'airport'
		| 'party_store'
		| 'dive_bar'
		| 'german_restaurant'
		| 'sewing_shop'
		| 'internet_cafe'
		| 'bridge'
		| 'military_office'
		| 'donut_shop'
		| 'nature_reserve'
		| 'photo_lab'
		| 'gastropub'
		| 'salad_bar'
		| 'rest_area'
		| 'bagel_shop'
		| 'thai_restaurant'
		| 'chocolate_shop'
		| 'tax_advisor'
		| 'speakeasy'
		| 'leather_goods'
		| 'furniture_maker'
		| 'tapas_restaurant'
		| 'karaoke_bar'
		| 'community_college'
		| 'cheese_shop'
		| 'hookah_lounge'
		| 'billiards'
		| 'emergency_room'
		| 'tennis_courts'
		| 'boat_rental'
		| 'sandwich_shop'
		| 'video_game_store'
		| 'camera_shop'
		| 'arts_center'
		| 'check_cashing'
		| 'political_party_office'
		| 'shoe_repair'
		| 'watch_store'
		| 'bookmaker'
		| 'carpet_store'
		| 'prison'
		| 'psychic'
		| 'brunch_restaurant'
		| 'water_park'
		| 'zoo'
		| 'middle_eastern_restaurant'
		| 'bike_rental'
		| 'vineyard'
		| 'boat_or_ferry'
		| 'herbalist'
		| 'ski_area'
		| 'cruise'
		| 'beach_bar'
		| 'television_studio'
		| 'vietnamese_restaurant'
		| 'basketball_court'
		| 'pawnshop'
		| 'dialysis_center'
		| 'ski_shop'
		| 'portuguese_restaurant'
		| 'hot_dog_stand'
		| 'carribean_restaurant'
		| 'pilates_studio'
		| 'aquarium'
		| 'embassy'
		| 'baseball_field'
		| 'gay_bar'
		| 'latin_american_restaurant'
		| 'hunting_store'
		| 'distillery'
		| 'vape_shop'
		| 'lounge'
		| 'mattress_store'
		| 'outlet_store'
		| 'currency_exchange'
		| 'cannabis_dispensary'
		| 'fair_grounds'
		| 'korean_restaurant'
		| 'surf_spot'
		| 'gymnastics'
		| 'summer_camp'
		| 'fireworks_store'
		| 'african_restaurant'
		| 'bubble_tea'
		| 'pier'
		| 'university_book_store'
		| 'ice_rink'
		| 'public_transportation_station'
		| 'light_rail_station'
		| 'road'
		| 'surfboard_store'
		| 'turkish_coffeehouse'
		| 'english_restaurant'
		| 'skatepark'
		| 'frozen_yogurt_shop'
		| 'rafting_spot'
		| 'fountain'
		| 'lighthouse'
		| 'outdoors_store'
		| 'climbing'
		| 'airport_terminal'
		| 'go_kart_racing'
		| 'apartment_or_condo'
		| 'miniature_golf'
		| 'lighting_store'
		| 'food_truck'
		| 'synagogue'
		| 'brazilian_restaurant'
		| 'cave'
		| 'tunnel'
		| 'noodle_restaurant'
		| 'track'
		| 'sports_center'
		| 'kitchen_store'
		| 'gun_store'
		| 'hawaiian_restaurant'
		| 'waterfall'
		| 'soccer_stadium'
		| 'boxing_gym'
		| 'driving_range'
		| 'pop_up_shop'
		| 'disc_golf_course'
		| 'village'
		| 'canal'
		| 'ramen_restaurant'
		| 'coffee_roaster'
		| 'buddhist_temple'
		| 'cuban_restaurant'
		| 'picnic_shelter'
		| 'indoor_cycling'
		| 'airport_gate'
		| 'skydiving_drop_zone'
		| 'peruvian_restaurant'
		| 'cricket_club'
		| 'service_area'
		| 'filipino_restaurant'
		| 'railway_platform'
		| 'observatory'
		| 'intersection'
		| 'college'
		| 'laser_tag'
		| 'climbing_gym'
		| 'indonesian_restaurant'
		| 'sake_bar'
		| 'neighbourhood'
		| 'island'
		| 'football_stadium'
		| 'bus_line'
		| 'planetarium'
		| 'carpet_cleaner'
		| 'motorsports_store'
		| 'optometrist'
		| 'scuba_diving_shop'
		| 'labor_union'
		| 'basketball_stadium'
		| 'creole_restaurant'
		| 'windmill'
		| 'persian_restaurant'
		| 'baseball_stadium'
		| 'irish_pub'
		| 'tiki_bar'
		| 'train'
		| 'baggage_claim'
		| 'duty_free_shop'
		| 'tennis_stadium'
		| 'city'
		| 'airport_ticket_counter'
		| 'meeting_room'
		| 'town'
		| 'outdoor_sculpture'
		| 'theme_park_attraction'
		| 'zoo_exhibit'
		| 'korean_barbeque_restaurant'
		| 'river'
		| 'gluten_free_restaurant'
		| 'mountain_hut'
		| 'beer_festival'
		| 'hockey_stadium'
		| 'sauna'
		| 'tree'
		| 'champagne_bar'
		| 'waffle_shop'
		| 'corporate_amenity'
		| 'exhibit'
		| 'well'
		| 'boat_launch'
		| 'dam'
		| 'cable_car'
		| 'chairlift'
		| 'racecourse'
		| 'hunting_area'
		| 'ski_trail'
		| 'rugby_stadium'
		| 'lgbtq_organization'
		| 'county'
		| 'state'
		| 'waste_disposal'
		| 'country'
		| 'graffiti'
		| 'hotel_bar'
		| 'moving_target'
		| 'street'
		| 'treecare'
		| 'variety_store'
		| 'veterans_service'
		| 'whiskey_bar';
};

export class Mapbox {
	private apiKey: string;
	private geocodeApiKey: string;
	constructor(apiKey: string, geocodeApiKey: string) {
		this.apiKey = apiKey;
		this.geocodeApiKey = geocodeApiKey;
	}

	public async getCategorySearch(params: CategorySearchParams) {
		const [lon, lat] = await new MapUtilities(this.geocodeApiKey).getCoordinates(params.city);
		console.log(this, params);
		const response = await axios.get(
			`https://api.mapbox.com/search/searchbox/v1/category/${params.category}`,
			{
				params: {
					limit: params.limit,
					access_token: this.apiKey,
					origin: `${lon},${lat}`,
					proximity: `${lon},${lat}`,
				},
			}
		);

		return response.data;
	}
}
